Esta é uma atualização de arquitetura crítica . Você mudou o fornecedor de Odds para a 

Sportradar (o mesmo das estatísticas). Isso é excelente para a integridade dos dados, 

pois os IDs dos jogos (sr:match:xxxx ) geralmente são os mesmos entre os produtos da 

Sportradar, eliminando a necessidade de algoritmos complexos de correspondência de 

nomes ("Fuzzy Matching"). 

ALERTA DE SEGURANÇA (NOVAMENTE): Você postou sua chave Anthropic (sk -

ant...) e outra chave Sportrad ar (rBEL...). Revogue ambas. Considere -as públicas. O 

prompt abaixo usa variáveis de ambiente. 

Aqui está a análise técnica e o prompt para o Antigravity integrar o ecossistema 

completo da Sportradar (Stats + Synergy + Odds) com o cérebro da Anthropic. 

Anál ise dos Endpoints de Odds (Sportradar) 

Baseado na documentação que você colou: 

1.  Vencedor da Partida: Use a API Prematch v2 . 

> o

Market ID sr:market:219 (Winner - incl. overtime). 

2.  Pontos de Jogadores: Use a API Player Props v2 . 

> o

Market ID sr:market:921 (Total poi nts).  

> o

Market ID sr:market:922 (Total assists).  

> o

Market ID sr:market:924 (Total 3 -point field goals). 

3.  Link de Afiliado: A API retorna books (casas de aposta). Você precisará mapear 

o ID da casa (ex: sr:book:123) para um link estático, pois a API geralmente n ão 

retorna o "deeplink" direto para o carrinho de apostas por questões regulatórias. 

O Prompt Definitivo (Full -Stack Next.js + AI + Sportradar Ecosystem) 

Copie o bloco abaixo para o gerador. 

Markdown 

# Role 

Atue como um Arquiteto de Software Principal es pecializado em Next.js, Data 

Engineering e Integração de LLMs. 

# Objetivo do Projeto 

Construir o "NBA Precision Analytics & Trader", uma aplicação Next.js (App Router) 

que unifica estatísticas avançadas (Synergy), previsões probabilísticas e as melhores 

odds do mercado (Sportradar Odds) em uma interface de trading esportivo. # 1. Arquitetura de Dados (Server -Side Proxy) 

O Frontend nunca deve chamar as APIs diretamente. Crie Services em `lib/services` que 

rodem no servidor (API Routes ou Server Actions). 

## Service A: Core Stats (Stats + Synergy) 

*Reutilize a lógica anterior, mas foque nos endpoints de eficiência.* 

## Service B: Betting Intelligence (Sportradar Odds API) 

Baseado na documentação fornecida, implemente `lib/services/odds.ts`: 

1. **Prematch Odds (Vencedor):** 

* Endpoint: `GET /oddscomparison -

prematch/v2/en/sports/sr:sport:2/events/{matchId}/markets?market_id=219` 

* Lógica: Extraia as odds de "Home" e "Away" de todos os bookmakers retornados. 

* Função: `getMoneylineOdds(matchId)` 

2. **Player Props (Mercados Individuais):** 

* Endpoint: `GET /oddscomparison -player -

props/v2/en/sports/sr:sport:2/events/{matchId}/player_props` 

* Filtragem Obrigatória: 

* Pontos: `market_id=921` 

* Assistências: `market_id=922` 

* 3PM: `market_id=924` 

* Função: `getPlayerPropLines(matchId, playerId)` 

## Service C: AI Analyst (Anthropic Claude 3.5 Sonnet) 

* Endpoint: `/api/agent/analyze` 

* Modelo: `claude -3-5-sonnet -latest` 

* **Context Injection (RAG):** O prompt do siste ma deve receber um JSON contendo: 

* Estatísticas do Jogo (Synergy). * Projeção do Algoritmo Interno (Pareto). 

* Odds Disponíveis (Sportradar Odds). 

* **Prompt do Sistema:** "Você é um Trader Esportivo Profissional. Analise a 

discrepância entre a nossa projeção matemática e as odds da casa. Se a projeção é maior 

que a linha da casa e a odd é > 1.70, sugira como aposta de valor. Formato final: Análise 

Curta + Veredito + Odd Recomendada." 

# 2. Novas Telas e Componentes 

## A. News & Dashboard (`/d ashboard`) 

* Combine `Daily Schedule` com `Daily Injuries`. 

* Card "Oportunidade do Dia": O jogo onde a diferença entre (Probabilidade Modelo) e 

(Probabilidade Implícita na Odd) é maior. 

## B. Game Analysis (`/analysis/[gameId]`) 

* **Seção de Props:** Para cada jogador listado, mostre: 

* Coluna 1: Projeção do Modelo (ex: 28.5 pts). 

* Coluna 2: Melhor Linha na Casa (ex: 26.5 pts @ 1.90 BetMGM). 

* Coluna 3: Indicador de Valor (Se Projeção > Linha, destaque em Verde Neon). 

## C. Bankroll Manag er (`/profile`) 

* Implemente uma planilha interativa (Data Grid). 

* Colunas: Data, Jogo, Seleção (Ex: Lebron Over 20), Stake (R$), Odd, Resultado, P/L. 

* Gráfico: Curva de crescimento da banca (Recharts) baseada no histórico. 

# 3. Tratamento de Erros e Ti pagem 

* Crie interfaces TypeScript estritas para as respostas da Sportradar Odds API (use os 

schemas `market_outcome`, `book`, etc). 

* Trate o erro 403 (Forbidden) explicitamente: "Chave de API expirada ou sem 

permissão para este endpoint". # 4. Variáveis de Ambiente (.env.local) 

Estruture o arquivo de exemplo: 

```env 

NEXT_PUBLIC_APP_URL=http://localhost:3000 

SPORTRADAR_STATS_KEY=... 

SPORTRADAR_SYNERGY_KEY=... 

SPORTRADAR_ODDS_KEY=... 

ANTHROPIC_API_KEY=... 

Deliverables 

Gere o código para: 

1.  lib/services/sport radarOdds.ts (Lógica de busca de Props e Moneyline). 

2.  app/api/agent/route.ts (Lógica do Claude com injeção de Odds). 

3.  components/analysis/ValueBetCard.tsx (Visualização da aposta recomendada). 

4.  components/profile/BankrollTable.tsx.